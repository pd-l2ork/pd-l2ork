#N canvas 504 34 1550 988 10;
#X floatatom 300 90 5 0 0 0 - - - 0 0 1, f 5;
#X obj 1238 290 text define clients;
#X floatatom 738 96 5 0 0 0 - - - 0 0 1, f 5;
#X symbolatom 926 74 16 0 0 0 - - - 0 0 1, f 16;
#X obj 1251 221 list prepend broadcast;
#X obj 1251 242 list trim;
#X obj 448 16 r server-out;
#X obj 1279 476 text set clients;
#X obj 1238 314 loadbang;
#X obj 1387 476 text delete clients;
#X obj 1238 339 t b 999 b;
#X msg 1387 453 -1;
#X obj 565 606 text search clients 1;
#X obj 577 947 s server-out;
#X msg 547 736 \$2;
#X obj 547 757 pack 0 0;
#X obj 777 829 gate 1 0;
#X obj 796 947 text set clients;
#X floatatom 565 631 5 0 0 0 - - - 0 0 1, f 5;
#X obj 604 701 text get clients 0;
#X floatatom 604 722 5 0 0 0 - - - 0 0 1, f 5;
#X obj 565 655 moses 0;
#X obj 565 677 t 0 f;
#X obj 448 289 t b b;
#X text 526 337 check if the user is not already in the client list
;
#X msg 514 358 \$2;
#X obj 514 401 text search clients 1;
#X obj 514 422 == -1;
#X floatatom 514 380 5 0 0 0 - - - 0 0 1, f 5;
#X obj 514 443 + 1;
#X floatatom 514 464 5 0 0 0 - - - 0 0 1, f 5;
#X text 608 582 create a new client;
#X text 360 599 resend client requested info;
#X obj 377 682 text search clients 1;
#X msg 359 771 \$2;
#X obj 359 792 pack 0 0;
#X floatatom 377 707 5 0 0 0 - - - 0 0 1, f 5;
#X obj 404 751 text get clients 0;
#X floatatom 404 772 5 0 0 0 - - - 0 0 1, f 5;
#X obj 377 729 t f f;
#X obj 359 623 t l l;
#X msg 386 649 \$2;
#X text 649 394 ping myid -- checks if a client is still connected
and updates the client list accordingly;
#X text 1262 166 broadcasts messages among clients;
#X text 1360 290 client list is stored here;
#X obj 40 715 s server-out;
#X text 1230 941 l2ork.music.vt.edu;
#X obj 40 583 coll network-update-messages-coll.txt;
#C restore;
#X obj 40 671 list prepend send;
#X obj 40 649 list prepend clientsocket;
#X obj 40 693 list trim;
#X obj 40 605 list prepend clientnum;
#X obj 160 528 t b f;
#X text 1125 551 abstractions above notify server and clients of client
disconnect. Server frees up the client slot while clients stop and
clear the instance.;
#X obj 40 627 list prepend report;
#X obj 70 349 delay 500;
#X text 10 256 delay to allow client to set its client info, f 22
;
#X obj 300 16 loadbang;
#X obj 300 58 metro 1000;
#X obj 300 38 tgl 15 0 empty empty empty 17 7 0 10 #fffcfcfc #ff000000
#ff000000 1 1 1;
#X msg 300 113 broadcast nclients \$1;
#X obj 300 135 s server-out;
#X text 1170 779 to reset a disconnected client \, server sends all
others following values for the disconnected client: out-amp 0 \, tracker
0--this is contained within the client-ping abstraction, f 58;
#N canvas 513 72 884 967 filter-remote-admin-messages 0;
#X obj 63 34 t l l;
#X obj 63 12 inlet;
#X obj 18 129 gate 2 1;
#X obj 18 913 outlet;
#X msg 90 99 2;
#X msg 147 99 1;
#X obj 78 617 gate 2 1;
#X obj 123 387 t l l 1;
#X obj 90 77 route chat;
#X msg 90 56 \$1;
#X obj 142 409 zl slice 2;
#X obj 274 361 loadbang;
#X obj 199 456 route, f 13;
#X obj 274 429 tosymbol;
#X text 331 361 "password" for server admin commands;
#X obj 379 913 print server;
#X obj 110 721 print chat;
#X msg 220 187 \$2;
#X obj 220 208 tosymbol;
#X obj 220 229 s2l S;
#X msg 220 250 \$1;
#X msg 220 318 1;
#X msg 278 318 0;
#X obj 123 321 gate 2 1;
#X obj 150 359 gate 1 0;
#X obj 220 271 tosymbol;
#X obj 110 679 list trim;
#X obj 110 700 route chat;
#X msg 189 880 malformed server request;
#X msg 274 405 p:l2orklicious;
#X obj 189 855 t b;
#X obj 370 405 sprintf p:%s;
#N canvas 1115 214 486 682 char-obfuscator 0;
#X obj 197 54 inlet;
#X obj 82 623 outlet;
#X obj 197 310 zl slice 3;
#X obj 197 184 t l l;
#X msg 224 206 \$2;
#X obj 152 287 gate 2 1;
#X msg 224 250 2;
#X msg 329 250 1;
#X obj 152 565 list append;
#X msg 215 543 X;
#X obj 224 228 route tracker-char;
#X obj 152 130 gate 2 1;
#X obj 276 79 + 1;
#X obj 276 54 r obfuscate-chars;
#X obj 317 384 list fromsymbol;
#X obj 317 407 == 160;
#X obj 152 461 gate 2 1;
#X obj 317 430 + 1;
#X msg 323 520 160;
#X obj 323 496 loadbang;
#X obj 260 566 list append;
#X obj 323 543 list tosymbol;
#X obj 254 361 t 1;
#X obj 254 337 route float;
#X obj 317 361 tosymbol;
#X connect 0 0 11 1;
#X connect 2 0 16 1;
#X connect 2 1 23 0;
#X connect 3 0 5 1;
#X connect 3 1 4 0;
#X connect 4 0 10 0;
#X connect 5 0 1 0;
#X connect 5 1 2 0;
#X connect 6 0 5 0;
#X connect 7 0 5 0;
#X connect 8 0 1 0;
#X connect 9 0 8 1;
#X connect 10 0 6 0;
#X connect 10 1 7 0;
#X connect 11 0 1 0;
#X connect 11 1 3 0;
#X connect 12 0 11 0;
#X connect 13 0 12 0;
#X connect 14 0 15 0;
#X connect 15 0 17 0;
#X connect 16 0 8 0;
#X connect 16 1 20 0;
#X connect 17 0 16 0;
#X connect 18 0 21 0;
#X connect 19 0 18 0;
#X connect 19 0 9 0;
#X connect 20 0 1 0;
#X connect 21 0 20 1;
#X connect 22 0 16 0;
#X connect 23 0 22 0;
#X connect 23 1 24 0;
#X connect 24 0 14 0;
#X restore 18 761 pd char-obfuscator;
#X obj 199 507 s admin-messages;
#N canvas 1207 281 376 275 l2ork-reset-client-list 0;
#X obj 115 37 r admin-messages;
#X obj 115 62 route l2ork-reset-client-list;
#X obj 142 110 s \$0-reinit;
#X msg 115 152 server client list reset;
#X obj 115 86 t b b;
#X obj 51 216 s admin-main-outlet;
#X obj 179 216 s print-server;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 3 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 4 1 2 0;
#X restore 199 528 pd l2ork-reset-client-list;
#X obj 33 880 r admin-main-outlet;
#X obj 379 880 r print-server;
#N canvas 1160 287 394 401 l2ork-report 0;
#X obj 55 37 r admin-messages;
#X obj 82 218 s \$0-report;
#X msg 55 241 server requested report;
#X obj 55 195 t b b;
#X msg 112 155 server requested report on client \$1;
#X obj 55 85 route bang;
#X obj 112 108 t f f;
#X obj 139 132 s \$0-report-one;
#X obj 55 62 route l2ork-report;
#X obj 55 322 s admin-main-outlet;
#X obj 200 322 s print-server;
#X connect 0 0 8 0;
#X connect 2 0 9 0;
#X connect 2 0 10 0;
#X connect 3 0 2 0;
#X connect 3 1 1 0;
#X connect 4 0 10 0;
#X connect 4 0 9 0;
#X connect 5 0 3 0;
#X connect 5 1 6 0;
#X connect 6 0 4 0;
#X connect 6 1 7 0;
#X connect 8 0 5 0;
#X restore 199 549 pd l2ork-report;
#N canvas 1193 281 360 401 l2ork-sync-all 0;
#X obj 55 47 r admin-messages;
#X obj 55 332 s admin-main-outlet;
#X obj 200 332 s print-server;
#X obj 55 72 route l2ork-sync-all;
#X msg 55 229 server global sync requested \, sync-all;
#X connect 0 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 4 0 2 0;
#X restore 199 570 pd l2ork-sync-all;
#N canvas 1160 188 536 403 l2ork-disconnect 0;
#X obj 49 41 r admin-messages;
#X obj 179 326 s admin-main-outlet;
#X obj 308 326 s print-server;
#X obj 49 66 route l2ork-disconnect;
#X msg 153 294 send \$1 server disconnect;
#X obj 126 179 - 1;
#X obj 126 202 text get clients 1;
#X obj 126 225 t 0 f;
#X obj 62 261 gate 1 0;
#X obj 50 90 route bang;
#X obj 107 116 t f f 1;
#X obj 407 326 s server-out;
#X obj 50 326 s malformed-request;
#X connect 0 0 3 0;
#X connect 3 0 9 0;
#X connect 4 0 11 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 7 1 4 0;
#X connect 8 0 4 0;
#X connect 9 0 12 0;
#X connect 9 1 10 0;
#X connect 10 0 8 1;
#X connect 10 1 5 0;
#X connect 10 2 8 0;
#X restore 199 591 pd l2ork-disconnect;
#X obj 189 830 r malformed-request;
#N canvas 41 91 559 515 l2ork-free-slot 0;
#X obj 49 41 r admin-messages;
#X obj 179 456 s admin-main-outlet;
#X obj 308 456 s print-server;
#X obj 407 456 s server-out;
#X obj 49 456 s malformed-request;
#X obj 106 138 - 1;
#X obj 106 161 text get clients 1;
#X obj 106 184 sel 0;
#X msg 233 288 \$1 0;
#X obj 233 311 text set clients;
#X obj 179 231 f;
#X msg 179 425 server slot \$1 freed and user \$1 made guest;
#X obj 49 90 route bang;
#X obj 106 114 t f f;
#X obj 49 66 route l2ork-free-slot;
#X msg 206 341 \; \$1-client-free bang;
#X obj 179 254 t f f f f, f 14;
#X obj 271 288 - 1;
#X obj 133 207 t b f b;
#X obj 80 288 s \$0-report-leds;
#X obj 80 254 delay 500;
#X msg 152 377 send \$1 myid \$1 0;
#X text 264 377 guests are given an id of 0 \, so that they can still
receive l2ork-sync-* commands (disconnected users have an id of -1).
, f 41;
#X connect 0 0 14 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 1 18 0;
#X connect 8 0 9 0;
#X connect 10 0 16 0;
#X connect 11 0 1 0;
#X connect 11 0 2 0;
#X connect 12 0 4 0;
#X connect 12 1 13 0;
#X connect 13 0 5 0;
#X connect 13 1 10 1;
#X connect 14 0 12 0;
#X connect 16 0 11 0;
#X connect 16 1 15 0;
#X connect 16 2 8 0;
#X connect 16 3 17 0;
#X connect 17 0 9 1;
#X connect 18 0 20 0;
#X connect 18 1 21 0;
#X connect 18 2 10 0;
#X connect 20 0 19 0;
#X connect 21 0 3 0;
#X restore 199 612 pd l2ork-free-slot;
#N canvas 1127 265 534 484 l2ork-guest-chat 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 90 route bang;
#X obj 49 66 route l2ork-guest-chat;
#X msg 233 198 server guest chat toggled to \$1;
#X obj 106 173 expr 2-$f1;
#X obj 106 114 t f f;
#X obj 106 198 s toggle-guest-chat;
#X connect 0 0 6 0;
#X connect 5 0 4 0;
#X connect 5 1 9 0;
#X connect 6 0 5 0;
#X connect 7 0 1 0;
#X connect 7 0 2 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 9 1 7 0;
#X restore 199 633 pd l2ork-guest-chat;
#X obj 92 261 r toggle-guest-chat;
#N canvas 1103 304 534 470 l2ork-load 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 90 route bang;
#X obj 106 203 tosymbol;
#X obj 249 173 loadbang;
#X obj 106 284 pack s f;
#X floatatom 249 251 9 0 0 0 - - - 0 0 1, f 9;
#X obj 161 90 route float;
#X obj 204 281 pack s f;
#X msg 106 342 server requested session \$1 to be loaded on all clients
with sync being delayed by \$2ms, f 44;
#X msg 204 303 server session load \$1 \$2;
#X obj 161 115 t f f;
#X msg 161 140 server session load sync delay set to \$1;
#X msg 249 197 2000;
#X obj 49 66 route l2ork-load l2ork-load-sync-delay;
#X obj 106 225 t s s;
#X connect 0 0 17 0;
#X connect 5 0 4 0;
#X connect 5 1 6 0;
#X connect 6 0 18 0;
#X connect 7 0 16 0;
#X connect 8 0 12 0;
#X connect 9 0 8 1;
#X connect 9 0 11 1;
#X connect 10 0 14 0;
#X connect 10 1 4 0;
#X connect 11 0 13 0;
#X connect 12 0 2 0;
#X connect 13 0 1 0;
#X connect 14 0 15 0;
#X connect 14 1 9 0;
#X connect 15 0 2 0;
#X connect 16 0 9 0;
#X connect 17 0 5 0;
#X connect 17 1 10 0;
#X connect 18 0 8 0;
#X connect 18 1 11 0;
#X restore 199 654 pd l2ork-load l2ork-load-sync-delay;
#N canvas 1285 340 534 484 l2ork-save 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 90 route bang;
#X msg 133 167 server session save \$1;
#X msg 106 191 server requested session \$1 to be saved on all clients
;
#X obj 106 135 t s s;
#X obj 106 113 tosymbol;
#X obj 49 66 route l2ork-save;
#X connect 0 0 10 0;
#X connect 5 0 4 0;
#X connect 5 1 9 0;
#X connect 6 0 1 0;
#X connect 7 0 2 0;
#X connect 8 0 7 0;
#X connect 8 1 6 0;
#X connect 9 0 8 0;
#X connect 10 0 5 0;
#X restore 199 675 pd l2ork-save;
#N canvas 1104 307 558 428 l2ork-set-password 0;
#X obj 25 23 r admin-messages;
#X obj 155 388 s admin-main-outlet;
#X obj 284 388 s print-server;
#X obj 383 388 s server-out;
#X obj 25 388 s malformed-request;
#X obj 25 72 route bang;
#X obj 25 48 route l2ork-set-password;
#X obj 115 120 tosymbol;
#X obj 142 220 pack s 0;
#X obj 142 255 t l l;
#X msg 142 276 send \$2 server new server password set to \$1;
#X msg 169 298 new server password set to \$1 by the client connected
to the network socket \$2;
#X obj 40 220 s new-password;
#X obj 115 162 t s s;
#X obj 187 197 r incoming-packet-socket;
#X connect 0 0 6 0;
#X connect 5 0 4 0;
#X connect 5 1 7 0;
#X connect 6 0 5 0;
#X connect 7 0 13 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 3 0;
#X connect 11 0 2 0;
#X connect 13 0 12 0;
#X connect 13 1 8 0;
#X connect 14 0 8 1;
#X restore 199 696 pd l2ork-set-password;
#X obj 370 383 r new-password;
#N canvas 1117 305 540 467 l2ork-length-all 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 90 route bang;
#X obj 49 66 route l2ork-length-all;
#X obj 106 117 route float;
#X msg 106 314 server requested global loop length sync \, loop-length
\$1, f 31;
#X connect 0 0 6 0;
#X connect 5 0 4 0;
#X connect 5 1 7 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 7 1 4 0;
#X connect 8 0 1 0;
#X connect 8 0 2 0;
#X restore 199 717 pd l2ork-length-all;
#N canvas 1130 301 540 467 l2ork-length 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 90 route bang;
#X obj 106 114 route list;
#N canvas 15 57 465 541 map-lengths-to-clients 0;
#X obj 213 21 inlet;
#X obj 213 71 iter;
#X obj 240 127 counter;
#X obj 240 152 t f f;
#X obj 267 430 gate 1 0;
#X obj 151 152 route float;
#X obj 65 311 outlet;
#X obj 151 311 pack 0 0, f 10;
#X obj 267 455 outlet;
#X obj 169 265 text get clients 1;
#X obj 213 46 t l 0;
#X obj 169 288 moses 1;
#X obj 213 96 t f b;
#X msg 151 335 send \$2 server loop-length \$1;
#X obj 267 175 < 14;
#X connect 0 0 10 0;
#X connect 1 0 12 0;
#X connect 2 0 3 0;
#X connect 3 0 9 0;
#X connect 3 1 14 0;
#X connect 4 0 8 0;
#X connect 5 0 7 0;
#X connect 5 1 6 0;
#X connect 7 0 13 0;
#X connect 9 0 11 0;
#X connect 10 0 1 0;
#X connect 10 1 2 2;
#X connect 11 0 4 0;
#X connect 11 1 7 1;
#X connect 12 0 5 0;
#X connect 12 1 2 0;
#X connect 13 0 4 1;
#X connect 14 0 4 0;
#X restore 176 323 pd map-lengths-to-clients;
#X obj 176 215 t l b;
#X msg 203 263 server requested user-specific loop length sync, f
19;
#X obj 49 66 route l2ork-length;
#X connect 0 0 10 0;
#X connect 5 0 4 0;
#X connect 5 1 6 0;
#X connect 6 0 8 0;
#X connect 6 1 4 0;
#X connect 7 0 4 0;
#X connect 7 1 3 0;
#X connect 8 0 7 0;
#X connect 8 1 9 0;
#X connect 9 0 1 0;
#X connect 9 0 2 0;
#X connect 10 0 5 0;
#X restore 430 528 pd l2ork-length;
#N canvas 1159 265 540 492 l2ork-obfuscate 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 66 route l2ork-obfuscate;
#X obj 183 146 split 0 1;
#X obj 183 170 t f f;
#X msg 210 303 server requested key obfuscation to be set to \$1,
f 16;
#X obj 49 90 route float;
#X obj 98 228 s obfuscate-chars;
#X connect 0 0 5 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 6 1 4 0;
#X connect 7 0 10 0;
#X connect 7 1 8 0;
#X connect 8 0 2 0;
#X connect 8 0 1 0;
#X connect 9 0 6 0;
#X connect 9 1 4 0;
#X restore 430 549 pd l2ork-obfuscate;
#N canvas 1119 273 540 467 l2ork-conduct 0;
#X obj 49 41 r admin-messages;
#X obj 179 406 s admin-main-outlet;
#X obj 308 406 s print-server;
#X obj 407 406 s server-out;
#X obj 49 406 s malformed-request;
#X obj 49 66 route l2ork-conduct l2ork-teach;
#X obj 49 102 list prepend report;
#X obj 49 127 list prepend broadcast;
#X obj 49 152 list trim;
#X connect 0 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X restore 430 570 pd l2ork-conduct l2ork-teach;
#N canvas 1090 276 604 469 l2ork-sync-save 0;
#X obj 34 46 r admin-messages;
#X obj 165 411 s admin-main-outlet;
#X obj 294 411 s print-server;
#X obj 393 411 s server-out;
#X obj 34 411 s malformed-request;
#X obj 34 94 route bang;
#X obj 91 263 t s s;
#X obj 91 241 tosymbol;
#X msg 91 322 server requested session \$1 to be saved on all clients
with sync enabled, f 38;
#X msg 118 295 server session sync-save \$1;
#X obj 165 139 list prepend server session sync-save-data;
#X obj 34 70 route l2ork-sync-save l2ork-sync-save-data l2ork-sync-data
l2ork-sync-vis, f 88;
#X msg 427 184 server session sync-vis;
#X obj 383 272 counter;
#X msg 295 245 0;
#X obj 382 245 t b;
#X obj 338 299 f;
#X obj 339 357 print SERVER;
#X obj 295 220 route start end;
#X msg 339 321 forwarded \$1 l2ork-sync-save-data messages, f 23;
#X obj 165 94 t a a;
#N canvas 727 338 331 285 send-sync-data-to-online-users-only 0;
#X obj 96 30 inlet;
#X obj 51 233 outlet;
#X obj 123 128 text get clients 1;
#X obj 123 149 > 0;
#X msg 123 77 \$1;
#X obj 51 187 gate 1 0;
#X obj 51 210 list prepend server session sync-data;
#X obj 96 54 t a a a;
#X obj 123 102 - 1;
#X connect 0 0 7 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 7 0 5 1;
#X connect 7 1 4 0;
#X connect 8 0 2 0;
#X restore 296 161 pd send-sync-data-to-online-users-only;
#X connect 0 0 11 0;
#X connect 5 0 4 0;
#X connect 5 1 7 0;
#X connect 6 0 8 0;
#X connect 6 1 9 0;
#X connect 7 0 6 0;
#X connect 8 0 2 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 5 0;
#X connect 11 1 20 0;
#X connect 11 2 21 0;
#X connect 11 3 12 0;
#X connect 12 0 1 0;
#X connect 13 0 16 1;
#X connect 14 0 13 2;
#X connect 15 0 13 0;
#X connect 16 0 19 0;
#X connect 18 0 14 0;
#X connect 18 1 16 0;
#X connect 18 2 15 0;
#X connect 19 0 17 0;
#X connect 20 0 10 0;
#X connect 20 1 18 0;
#X connect 21 0 1 0;
#X restore 430 591 pd l2ork-sync-save l2ork-sync-save-data l2ork-sync-data
l2ork-sync-vis;
#X f 70;
#X obj 199 481 t a 2;
#X obj 168 154 t l l;
#N canvas 1105 290 568 481 l2ork-inst-level-at 0;
#X obj 21 125 r admin-messages;
#X obj 168 400 s admin-main-outlet;
#X obj 320 400 s print-server;
#X obj 436 400 s server-out;
#X obj 21 400 s malformed-request;
#X text 21 422 reports malformed messages, f 17;
#X text 168 422 passes messages through silly-chat and broadcasts to
all, f 21;
#X text 321 422 prints locally for logging purposes, f 14;
#X text 436 422 sends directly to the netserver, f 14;
#X obj 21 173 list prepend server at inst-level;
#X obj 168 197 list prepend server at inst-level-all;
#X text 21 26 a oneshot instrument level change based on timebar location.
can affect either one instrument or all based on a reference timebar
part.l2ork-inst-level-at <slot> <time> <level>l2ork-inst-level-all-at
<reference-slot> <time> <level-all>l2ork-inst-level-list-at <reference-slot>
<time> <list of levels for clients 1-12>, f 87;
#X obj 21 149 route l2ork-inst-level-at l2ork-inst-level-all-at l2ork-inst-level-list-at
, f 74;
#X obj 315 222 list prepend server at inst-level-list;
#X connect 0 0 12 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 12 0 9 0;
#X connect 12 1 10 0;
#X connect 12 2 13 0;
#X connect 13 0 1 0;
#X restore 430 717 pd l2ork-inst-level-at l2ork-inst-level-all-at l2ork-inst-level-list-at
;
#X f 71;
#X text 430 696 subpatch below has documentation;
#X obj 220 292 sel U admin GUE;
#X text 47 315 left is for all chat, f 11;
#X obj 199 429 route admin;
#X text 331 428 the left "route admin" is used to filter out admin
messages that come from the chat window (because those are added USER(socket)
or GUEST(socket) argument) by removing the admin argument \, whereas
those that don't have admin argument will be passed through the right
outlet., f 82;
#N canvas 1207 305 376 275 l2ork-custom 0;
#X obj 115 37 r admin-messages;
#X obj 115 217 s admin-main-outlet;
#X obj 115 62 route l2ork-custom;
#X obj 115 112 list trim;
#X obj 115 87 list prepend server l2ork-custom;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 430 612 pd l2ork-custom;
#N canvas 216 55 1509 992 l2ork-part 0;
#X obj 42 36 r admin-messages;
#X obj 171 951 s admin-main-outlet;
#X obj 300 951 s print-server;
#X obj 741 951 s server-out;
#X obj 42 951 s malformed-request;
#X obj 99 515 sel 0;
#X obj 431 864 text set clients;
#X obj 391 500 f;
#X obj 42 85 route bang;
#X obj 489 820 - 1;
#X obj 68 734 s \$0-report-leds;
#X obj 68 700 delay 500;
#X obj 99 316 unpack 0 0;
#X text 136 270 add part x to user y;
#X obj 172 875 list;
#X msg 99 293 \$2 \$1;
#X text 166 316 now reversed in order (user y \, part x);
#X obj 431 820 pack 0 0;
#X msg 99 364 \$1 0;
#X text 134 364 search only the client that has this socket and 2nd
argument zero \, which means it is not an added part \, but the actual
original client connection;
#X obj 353 877 f;
#X obj 370 852 + 1;
#X obj 99 482 text get clients 1;
#X msg 431 842 \$1 \$2 1;
#X msg 172 900 server user \$2 added part \$1;
#X obj 347 692 gate 2 1;
#X obj 431 594 text get clients 1;
#X obj 431 572 - 1;
#X obj 431 619 == 0;
#X obj 431 644 + 1;
#X obj 99 270 t l l;
#X obj 391 523 t f f f, f 14;
#X msg 221 821 server add-part failed: target part \$1 already occupied
, f 21;
#X msg 353 900 server add-part failed: no user connected to the part
\$1;
#X obj 741 728 list;
#X obj 741 753 list append;
#X obj 392 719 t b f f;
#X obj 99 437 t f f f;
#X obj 814 728 + 1;
#X obj 741 858 list append;
#X obj 741 883 list trim;
#X obj 633 601 f;
#X obj 639 816 list cat;
#X msg 684 778 clear;
#X obj 566 674 kalashnikov 14;
#X obj 585 738 text search clients 0 1;
#X obj 585 763 sel -1;
#X obj 618 785 + 1;
#X obj 144 114 t l l;
#X obj 99 226 gate 2 1;
#X msg 187 146 \$2;
#X obj 187 169 == 0;
#X obj 187 191 + 1;
#X text 221 147 if the second argument is zero \, then remove part
\, otherwise add it to the user \, that means when removing part \,
x is the part to remove \, and y is simply 0 (as in no user), f 36
;
#X text 401 60 DEBUG;
#X text 806 220 remove part (check if not user \, then check if it
is a valid part \, then disconnect and update leds), f 34;
#X obj 42 61 route l2ork-part;
#X text 160 36 assign or remove a part from user's control (these are
secondary parts added in 0.87), f 85;
#X msg 1082 305 \$1 1;
#X obj 1082 346 text search clients 0 2;
#X obj 1082 371 sel -1;
#X obj 869 490 f;
#X obj 1186 496 text set clients;
#X obj 1293 496 s \$0-report-leds;
#X obj 1293 472 delay 500;
#X obj 1126 442 f;
#X msg 1126 464 \$1 0 0;
#X obj 1178 556 sel 0;
#X obj 1178 531 text get clients 1;
#X obj 1250 753 list;
#X obj 1250 873 list append;
#X obj 1250 898 list trim;
#X obj 1148 841 list cat;
#X msg 1193 803 clear;
#X obj 1075 699 kalashnikov 14;
#X obj 1094 763 text search clients 0 1;
#X obj 1094 788 sel -1;
#X obj 1127 810 + 1;
#X text 1296 531 extract user socket;
#X msg 1323 641 \$1 0;
#X text 1361 641 add primary (user);
#X text 1326 873 append all other parts;
#X obj 903 660 f;
#X obj 869 273 t f f f f;
#X msg 988 864 server add-part failed: target part \$1 is inactive
, f 24;
#X obj 1168 590 f;
#X obj 1115 396 t b b b f f;
#X text 1013 560 search only the client that has this part's socket
and 2nd argument zero \, which means it is not an added part \, but
the actual original user connection, f 20;
#X msg 290 60 1 4;
#X obj 1323 666 text search clients 1 2;
#X obj 633 626 t b b b;
#X obj 606 701 pack 0 0 1;
#X obj 99 412 text search clients 0 2;
#X msg 253 60 5 4;
#X msg 327 60 1 0;
#X msg 364 60 5 0;
#X obj 1115 726 pack 0 0 1;
#X obj 1142 651 t b b b;
#X obj 246 449 t b b f f f;
#X obj 1250 825 list append;
#X obj 1323 801 + 1;
#X obj 1168 611 t f f f f b b;
#X obj 743 535 t f f b;
#X obj 916 951 print SERVER-PART;
#X msg 762 560 send \$1 myid \$1;
#X msg 1292 711 send \$1 myid \$1;
#X msg 831 864 server add-part failed: target part \$1 is either a
user or inactive, f 24;
#X connect 0 0 56 0;
#X connect 5 0 20 0;
#X connect 5 1 98 0;
#X connect 7 0 31 0;
#X connect 8 0 4 0;
#X connect 8 1 48 0;
#X connect 9 0 6 1;
#X connect 11 0 10 0;
#X connect 12 0 18 0;
#X connect 12 1 7 1;
#X connect 14 0 24 0;
#X connect 15 0 12 0;
#X connect 17 0 23 0;
#X connect 18 0 92 0;
#X connect 20 0 33 0;
#X connect 21 0 20 1;
#X connect 22 0 5 0;
#X connect 23 0 6 0;
#X connect 24 0 1 0;
#X connect 24 0 2 0;
#X connect 25 0 32 0;
#X connect 25 1 36 0;
#X connect 26 0 28 0;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 29 0 25 0;
#X connect 30 0 15 0;
#X connect 30 1 14 1;
#X connect 31 0 25 1;
#X connect 31 1 27 0;
#X connect 31 2 9 0;
#X connect 32 0 2 0;
#X connect 32 0 1 0;
#X connect 33 0 1 0;
#X connect 33 0 2 0;
#X connect 34 0 35 0;
#X connect 35 0 39 0;
#X connect 36 0 14 0;
#X connect 36 1 41 0;
#X connect 36 2 17 0;
#X connect 37 0 22 0;
#X connect 37 1 21 0;
#X connect 37 2 38 0;
#X connect 38 0 35 1;
#X connect 39 0 40 0;
#X connect 40 0 3 0;
#X connect 40 0 103 0;
#X connect 41 0 90 0;
#X connect 42 0 39 1;
#X connect 43 0 42 1;
#X connect 44 1 91 0;
#X connect 45 0 46 0;
#X connect 46 1 47 0;
#X connect 47 0 42 0;
#X connect 48 0 49 1;
#X connect 48 1 50 0;
#X connect 49 0 30 0;
#X connect 49 1 83 0;
#X connect 50 0 51 0;
#X connect 51 0 52 0;
#X connect 52 0 49 0;
#X connect 56 0 8 0;
#X connect 58 0 59 0;
#X connect 59 0 60 0;
#X connect 60 0 61 0;
#X connect 60 1 86 0;
#X connect 61 0 106 0;
#X connect 64 0 63 0;
#X connect 65 0 66 0;
#X connect 66 0 62 0;
#X connect 67 0 82 0;
#X connect 67 1 85 1;
#X connect 68 0 67 0;
#X connect 69 0 99 0;
#X connect 70 0 71 0;
#X connect 71 0 3 0;
#X connect 71 0 103 0;
#X connect 72 0 70 1;
#X connect 73 0 72 1;
#X connect 74 1 96 0;
#X connect 75 0 76 0;
#X connect 76 1 77 0;
#X connect 77 0 72 0;
#X connect 79 0 89 0;
#X connect 82 0 84 0;
#X connect 83 0 58 0;
#X connect 83 1 61 1;
#X connect 83 2 65 1;
#X connect 83 3 82 1;
#X connect 84 0 1 0;
#X connect 84 0 2 0;
#X connect 85 0 101 0;
#X connect 86 0 85 0;
#X connect 86 1 64 0;
#X connect 86 2 65 0;
#X connect 86 3 62 1;
#X connect 86 4 68 0;
#X connect 88 0 48 0;
#X connect 89 0 100 0;
#X connect 90 0 34 0;
#X connect 90 1 44 0;
#X connect 90 2 43 0;
#X connect 91 0 45 0;
#X connect 92 0 37 0;
#X connect 93 0 48 0;
#X connect 94 0 48 0;
#X connect 95 0 48 0;
#X connect 96 0 75 0;
#X connect 97 0 69 0;
#X connect 97 1 74 0;
#X connect 97 2 73 0;
#X connect 98 0 11 0;
#X connect 98 1 7 0;
#X connect 98 2 102 0;
#X connect 98 3 17 1;
#X connect 98 4 91 1;
#X connect 99 0 70 0;
#X connect 100 0 99 1;
#X connect 101 0 97 0;
#X connect 101 1 79 0;
#X connect 101 2 96 1;
#X connect 101 3 105 0;
#X connect 101 4 99 1;
#X connect 101 5 70 1;
#X connect 102 0 41 1;
#X connect 102 1 104 0;
#X connect 102 2 39 1;
#X connect 104 0 34 1;
#X connect 105 0 69 1;
#X connect 106 0 2 0;
#X connect 106 0 1 0;
#X restore 430 633 pd l2ork-part;
#X text 377 229 remote admin uses chat system. messages include: l2ork-conduct
\, l2ork-custom \, l2ork-disconnect \, l2ork-free-slot \, l2ork-guest-chat
\, l2ork-inst-level-at \, l2ork-inst-level-all-at \, l2ork-inst-level-list-at
\, l2ork-length \, l2ork-length-all \, l2ork-load \, l2ork-load-sync-delay
\, l2ork-obfuscate \, l2ork-part \, l2ork-report \, l2ork-reset-client-list
\, l2ork-save \, l2ork-sync-data \, l2ork-sync-save-data \, l2ork-sync-vis
\, l2ork-set-password \, l2ork-sync-all \, and l2ork-teach. All messages
need to be prepended by the server password (formatted as p:password)
\, which can be set below., f 67;
#N canvas 1048 21 726 881 l2ork-part-report 0;
#X obj 49 41 r admin-messages;
#X obj 179 826 s admin-main-outlet;
#X obj 308 826 s print-server;
#X obj 407 826 s server-out;
#X obj 49 826 s malformed-request;
#X obj 49 66 route l2ork-part-report;
#X obj 49 90 route bang;
#X obj 176 144 kalashnikov 14;
#X obj 286 183 text get clients;
#X obj 286 208 unpack 0 0 0;
#X obj 379 445 +;
#X obj 402 385 t f f f;
#X obj 441 499 gate 2 1;
#X obj 441 415 + 1;
#X obj 379 470 moses 1;
#X obj 286 639 pack;
#X obj 308 569 f;
#X obj 441 524 t b;
#X obj 286 275 t f b f;
#X obj 341 405 t f f;
#X obj 341 381 f;
#X obj 547 547 text search clients 1 2;
#X msg 547 522 \$1 0;
#X obj 486 524 t b;
#X obj 547 497 f;
#X obj 547 572 + 1;
#X msg 179 764 server sent l2ork part status, f 17;
#X obj 332 685 list prepend l2ork-part-status;
#X obj 332 729 list prepend;
#X obj 401 707 r incoming-packet-socket;
#X obj 332 754 list prepend send;
#X obj 332 779 list trim;
#X connect 0 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 4 0;
#X connect 7 1 8 0;
#X connect 7 2 26 0;
#X connect 8 0 9 0;
#X connect 9 0 18 0;
#X connect 9 1 20 1;
#X connect 9 2 11 0;
#X connect 10 0 14 0;
#X connect 11 1 10 1;
#X connect 11 2 13 0;
#X connect 12 0 17 0;
#X connect 12 1 23 0;
#X connect 13 0 12 0;
#X connect 14 0 15 1;
#X connect 14 1 12 1;
#X connect 15 0 27 0;
#X connect 16 0 15 1;
#X connect 17 0 16 0;
#X connect 18 0 15 0;
#X connect 18 1 20 0;
#X connect 18 2 16 1;
#X connect 19 0 10 0;
#X connect 19 1 24 1;
#X connect 20 0 19 0;
#X connect 21 0 25 0;
#X connect 22 0 21 0;
#X connect 23 0 24 0;
#X connect 24 0 22 0;
#X connect 25 0 16 0;
#X connect 26 0 2 0;
#X connect 26 0 1 0;
#X connect 27 0 28 0;
#X connect 28 0 30 0;
#X connect 29 0 28 1;
#X connect 30 0 31 0;
#X connect 31 0 3 0;
#X restore 430 654 pd l2ork-part-report;
#X connect 0 0 2 1;
#X connect 0 1 9 0;
#X connect 1 0 0 0;
#X connect 2 0 32 0;
#X connect 2 1 54 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 26 0;
#X connect 6 0 32 0;
#X connect 7 0 6 1;
#X connect 7 1 10 0;
#X connect 7 2 6 0;
#X connect 8 0 4 0;
#X connect 8 1 5 0;
#X connect 9 0 8 0;
#X connect 10 1 59 0;
#X connect 11 0 29 0;
#X connect 12 0 53 0;
#X connect 12 1 32 0;
#X connect 13 0 12 1;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 25 0;
#X connect 21 0 24 0;
#X connect 22 0 24 0;
#X connect 23 0 7 0;
#X connect 23 1 24 1;
#X connect 24 0 7 0;
#X connect 25 0 57 0;
#X connect 26 0 27 0;
#X connect 27 0 16 0;
#X connect 28 0 3 0;
#X connect 28 0 15 0;
#X connect 29 0 13 0;
#X connect 30 0 28 0;
#X connect 31 0 13 0;
#X connect 32 0 3 0;
#X connect 35 0 3 0;
#X connect 36 0 15 0;
#X connect 40 0 30 0;
#X connect 43 0 23 0;
#X connect 47 0 31 0;
#X connect 53 0 33 0;
#X connect 53 1 6 0;
#X connect 54 0 23 1;
#X connect 54 1 17 0;
#X connect 57 0 21 0;
#X connect 57 1 21 0;
#X connect 57 2 22 0;
#X connect 59 0 12 0;
#X connect 59 1 12 0;
#X restore 1224 145 pd filter-remote-admin-messages;
#X obj 1297 314 r \$0-reinit;
#X obj 43 291 r \$0-report;
#X obj 604 677 t f;
#X msg 857 889 \$2;
#X msg 762 889 \$1;
#X obj 762 912 s \$0-ping;
#X obj 962 261 r \$0-ping;
#X obj 445 947 s server-out;
#X msg 445 897 broadcast server connection \$2 1;
#X obj 284 463 text get clients 1;
#X obj 257 441 t f f;
#X obj 284 484 > 0;
#X obj 257 508 pack 0 0;
#X msg 257 529 broadcast server status \$1 \$2;
#X obj 257 550 s server-out;
#X obj 1279 408 + 1;
#X obj 857 912 - 1;
#X obj 257 463 + 1;
#X obj 43 326 t b b;
#X obj 1125 258 client-ping 1;
#X obj 1125 278 client-ping 2;
#X obj 1125 298 client-ping 3;
#X obj 1125 318 client-ping 4;
#X obj 1125 338 client-ping 5;
#X obj 1125 358 client-ping 6;
#X obj 1125 378 client-ping 7;
#X obj 1125 398 client-ping 8;
#X obj 1125 418 client-ping 9;
#X obj 1125 438 client-ping 10;
#X text 1330 379 dictates max number of clients;
#X text 121 741 DON'T FORGET TO UPDATE THE SERVER VERSION!!!, f 17
;
#X obj 547 582 t l 0 1 l;
#X msg 905 795 \$3;
#X obj 860 840 pack 0 s;
#X obj 255 135 change;
#X obj 255 158 print number of clients;
#N canvas 1201 172 450 346 connect-log 0;
#X obj 97 45 inlet;
#X obj 97 126 date;
#X obj 181 126 time;
#X obj 181 151 pack 0 0 0;
#X obj 97 151 pack 0 0 0;
#X obj 324 174 unpack 0 s;
#X obj 97 70 t b b l;
#X obj 97 246 print connection;
#X obj 97 223 sprintf %s %s assigned client %d;
#X obj 97 174 sprintf %d.%02d.%02d-%02d:%02d.%02d;
#X connect 0 0 6 0;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 1 2 4 2;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 2 2 3 2;
#X connect 3 0 9 3;
#X connect 4 0 9 0;
#X connect 5 0 8 2;
#X connect 5 1 8 1;
#X connect 6 0 1 0;
#X connect 6 1 2 0;
#X connect 6 2 5 0;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X restore 860 862 pd connect-log;
#X obj 905 817 tosymbol;
#X msg 860 817 \$2;
#N canvas 912 344 412 319 start-ping-timer 0;
#X obj 206 51 inlet;
#X obj 206 76 t l l;
#X msg 233 100 \$2;
#X obj 233 123 != -1;
#X obj 161 158 gate 1 0;
#X msg 161 182 \; \$2-timer bang \;;
#X connect 0 0 1 0;
#X connect 1 0 4 1;
#X connect 1 1 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X restore 621 829 pd start-ping-timer;
#X obj 448 119 sel 0;
#X obj 487 230 sel 0;
#X floatatom 475 140 5 0 0 0 - - - 0 0 1, f 5;
#X obj 487 209 text get clients 1;
#X obj 487 187 - 1;
#X text 318 289 send id and client #;
#X obj 448 252 t b 0;
#X obj 514 484 + 0, f 15;
#X floatatom 514 505 5 0 0 0 - - - 0 0 1, f 5;
#X obj 545 252 t b 2;
#X text 719 626 used to assign user-requested slot, f 20;
#X obj 487 252 t b 1;
#X obj 881 764 s server-out;
#X obj 448 96 t f f;
#X obj 475 312 pack f f s f;
#X text 487 289 pack dummy 0 (for message sync purposes) \, socket
\, IP \, requested slot, f 68;
#X obj 743 582 t l l 1 l;
#X msg 760 604 \$4;
#X obj 1324 423 tgl 15 0 empty empty empty 17 7 0 10 #fffcfcfc #ff000000
#ff000000 0 1 1;
#X text 1343 422 DEBUG;
#X msg 881 677 send \$2 server requested slot \$4 is unavailable--adding
you as a guest/observer. please note requesting slot 0 (default) will
assign you the first available slot. if no slots are available you
will be made a guest/observer., f 44;
#X text 1230 909 L2Ork Tweeter Server;
#X obj 1224 166 t l l;
#N canvas 717 65 536 847 silly-chat 0;
#X obj 119 29 inlet;
#X obj 119 206 route tracker-data;
#X obj 119 331 counter;
#X obj 119 352 t f f, f 7;
#X obj 119 415 f, f 7;
#X obj 119 394 sel 0;
#X msg 68 600 Tweeterlicious!!! \$1 musical notes and counting...;
#X msg 82 622 L2Orktastic!! This jamming session has produced \$1 notes!
;
#X msg 96 644 Yay! You have generated \$1 notes! L2Ork is strong with
this one...;
#X msg 110 679 \$1 notes!!! Keep on L2Orkin'!;
#X obj 54 758 list prepend server;
#X obj 54 784 outlet;
#X obj 177 513 + 1;
#X obj 119 373 % 100;
#X obj 119 289 sel 0;
#X msg 119 185 \$2;
#X obj 119 164 t l l;
#X obj 119 247 lister;
#X obj 119 227 t b;
#X msg 119 268 \$4;
#X msg 54 565 Tweeterriffic!!! Creative L2Orkists have already generated
\$1 notes!;
#X obj 54 543 gate 7 1;
#X msg 124 701 Wow! You've reached \$1 notes without pulling a Steven!
;
#X obj 177 491 random 7;
#X obj 146 76 zl len;
#X obj 119 53 t l l;
#X obj 146 101 > 1;
#X obj 119 141 gate 1 0;
#X msg 138 723 Tweeterin' L2Orkliciousness! \$1 notes have come to
pass...;
#X obj 119 449 t f f b;
#N canvas 744 347 450 323 log-notes-played 0;
#X obj 116 49 inlet;
#X obj 116 129 date;
#X obj 200 129 time;
#X obj 200 154 pack 0 0 0;
#X obj 116 154 pack 0 0 0;
#X obj 116 177 sprintf %d.%02d.%02d-%02d:%02d.%02d;
#X obj 116 73 t b b f;
#X obj 116 223 print server;
#X obj 116 200 sprintf %s: %d notes played, f 43;
#X connect 0 0 6 0;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 1 2 4 2;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 2 2 3 2;
#X connect 3 0 5 3;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 1 0;
#X connect 6 1 2 0;
#X connect 6 2 8 1;
#X connect 8 0 7 0;
#X restore 53 490 pd log-notes-played;
#X connect 0 0 25 0;
#X connect 1 0 18 0;
#X connect 2 0 3 0;
#X connect 3 0 13 0;
#X connect 3 1 4 1;
#X connect 4 0 29 0;
#X connect 5 0 4 0;
#X connect 6 0 10 0;
#X connect 7 0 10 0;
#X connect 8 0 10 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 12 0 21 0;
#X connect 13 0 5 0;
#X connect 14 1 2 0;
#X connect 15 0 1 0;
#X connect 16 0 15 0;
#X connect 16 1 17 1;
#X connect 17 0 19 0;
#X connect 18 0 17 0;
#X connect 19 0 14 0;
#X connect 20 0 10 0;
#X connect 21 0 20 0;
#X connect 21 1 6 0;
#X connect 21 2 7 0;
#X connect 21 3 8 0;
#X connect 21 4 9 0;
#X connect 21 5 22 0;
#X connect 21 6 28 0;
#X connect 22 0 10 0;
#X connect 23 0 12 0;
#X connect 24 0 26 0;
#X connect 25 0 27 1;
#X connect 25 1 24 0;
#X connect 26 0 27 0;
#X connect 27 0 16 0;
#X connect 28 0 10 0;
#X connect 29 0 30 0;
#X connect 29 1 21 1;
#X connect 29 2 23 0;
#X restore 1164 193 pd silly-chat;
#X obj 1251 263 s server-out;
#X text 899 19 whatismyid is called by a newly connected client \,
ping is to confirm the client is still connected \, disconnect is explicit
notification from the client that they are disconnecting (resolved
inside the client-ping abstraction) \, and everything else is broadcast
to all \, with some chat messages filtered for admin, f 80;
#X obj 851 175 moses 1;
#X obj 202 875 pack 0 0 0;
#X obj 232 719 loadbang;
#X msg 202 853 \$1 \$2;
#X obj 232 766 t f f;
#X obj 121 815 print server;
#X msg 121 792 L2Ork Tweeter Server version \$1;
#X msg 202 897 send \$1 server server version \$3 \$2;
#X obj 1125 458 client-ping 11;
#X obj 1125 478 client-ping 12;
#X text 1170 715 34 in total with 4 not broadcast for the purpose of
updating clients: reset \, clear \, flanger-mod-amp (activated by the
[t b f] from the flanger-hz) \, and note. Instead \, these are sent
as-needed, f 58;
#X text 1170 612 network vocabulary: reset \, clear \, delete \, tracker
\, tracker-char \, tracker-data \, tracker-note \, tracker-time \,
loop \, keyboard \, loop-length \, octave \, carrier \, modulator \,
overdrive \, note-dur \, harmonicity \, mod-amp \, ae \, me \, dry-amp
\, reverb-amp \, reverb-type \, echo-amp \, echo-ms \, echo-fb \, flanger-amp
\, flanger-hz \, flanger-mod-amp \, flanger-ms \, out-amp \, out-pan
\, inst-name \, username \, hover, f 58;
#X obj 160 550 kalashnikov 31;
#N canvas 805 392 303 222 report-one 0;
#X obj 80 33 r \$0-report-one;
#X obj 80 83 - 1;
#X obj 80 108 text get clients 1;
#X obj 80 58 t f f, f 21;
#X obj 203 163 outlet;
#X obj 107 163 outlet;
#X obj 80 133 sel 0;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 3 0 1 0;
#X connect 3 1 4 0;
#X connect 6 1 5 0;
#X restore 40 500 pd report-one;
#X text 520 96 we ignore report calls since that would allow for unauthorized
modifying of other users' settings, f 34;
#X obj 765 143 s incoming-packet-socket;
#X obj 738 120 t f f;
#X obj 217 336 r \$0-report-leds;
#X obj 830 582 t l 0 0 l;
#X obj 555 562 bng 15 250 50 0 empty empty empty 17 7 0 10 #fffcfcfc
#ff000000 #ff000000 1;
#X obj 448 38 netserver 9002 17, f 73;
#X text 1230 925 (c) 2020-present Ivica Ico Bukvic ico.bukvic.net;
#X obj 475 337 t l l l;
#X msg 475 358 \$2;
#X obj 43 349 bng 15 250 50 0 empty empty empty 17 7 0 10 #fffcfcfc
#ff000000 #ff000000 1;
#N canvas 727 397 202 135 session-report-response 0;
#X obj 23 16 r session-report-response;
#X obj 23 66 list trim;
#X obj 23 91 s server-out;
#X obj 23 41 list prepend send;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X restore 43 435 pd session-report-response;
#X obj 835 120 s session-report-response;
#X obj 448 74 route whatismyid ping disconnect report session-report
session-report-response, f 78;
#X obj 547 782 t l l l l l l l;
#N canvas 831 283 280 569 find-oldest-and-request 0;
#X obj 28 28 inlet;
#X obj 172 53 unpack 0 0;
#X obj 212 211 f;
#X obj 172 108 > 0;
#X obj 130 185 t f b;
#X obj 172 28 r uptime;
#X obj 28 520 s server-out;
#X obj 28 305 f;
#X obj 74 281 inlet;
#X obj 121 281 inlet;
#X msg 121 330 \$2;
#X msg 28 495 send \$1 server session-report \$2 \$3;
#X obj 28 365 pipe f f f 500;
#X obj 28 390 pack 0 0 0, f 14;
#X obj 28 415 t l l;
#X msg 55 438 \$3;
#X obj 55 463 s \$0-report-one;
#X text 35 234 socket we are requesting fromsocket requesting reportid
of the client requesting report;
#X obj 121 305 t l 0;
#X obj 172 79 t f f;
#X obj 172 133 sel 1;
#X obj 172 157 f;
#X connect 0 0 7 0;
#X connect 1 0 19 0;
#X connect 1 1 2 1;
#X connect 2 0 7 1;
#X connect 3 0 20 0;
#X connect 4 0 3 1;
#X connect 4 1 2 0;
#X connect 5 0 1 0;
#X connect 7 0 12 0;
#X connect 8 0 12 1;
#X connect 9 0 18 0;
#X connect 10 0 12 2;
#X connect 11 0 6 0;
#X connect 12 0 13 0;
#X connect 12 1 13 1;
#X connect 12 2 13 2;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X connect 14 1 15 0;
#X connect 15 0 16 0;
#X connect 18 0 10 0;
#X connect 18 1 3 1;
#X connect 19 0 3 0;
#X connect 19 1 21 1;
#X connect 20 0 21 0;
#X connect 21 0 4 0;
#X restore 43 413 pd find-oldest-and-request;
#X msg 577 922 send \$1 myid \$1 \$2;
#X obj 678 889 s get-uptime;
#X obj 777 854 t b l l l 0;
#X obj 1125 498 client-ping 13;
#X obj 1125 518 client-ping 14;
#X obj 217 413 kalashnikov 14;
#X obj 1238 379 kalashnikov 14;
#X text 658 245 if the requested slot is available give it to the user.
otherwise make them an observer., f 46;
#X obj 585 252 t b 3;
#X obj 502 541 gate 5 1, f 31;
#X text 612 483 1 resends client info \, 2 adds new client to any available
slot \, 3 adds it to the requested slot \, and 4 connects user as a
guest because either the slot is already occupied \, or all slots are
taken. 5 was added in 0.86 for immediately requesting observer slot.
, f 69;
#X obj 896 582 t l 0 0 l;
#X msg 947 611 send \$2 server adding you as a guest/observer., f
33;
#X obj 475 161 sel -1;
#X text 520 147 whatismyid with 0 assigns whichever slot may be available.
-1 is reserved for an immediate request for a guest/observer., f 38
;
#N canvas 541 306 478 573 multiping 1;
#X obj 185 175 kalashnikov 14;
#X obj 120 247 text get clients 1;
#X obj 235 425 pack 0 0;
#X obj 120 277 ==;
#X obj 120 302 sel 1;
#X text 110 30 output ping message is client id (left column) \, followed
by the actual row \, so usually n and n-1 where n can be between 1
and 14, f 34;
#X obj 235 365 t f f;
#X obj 280 400 - 1;
#X obj 225 205 t f f;
#X obj 235 337 f;
#X obj 185 145 t b f;
#X obj 252 247 + 1;
#X obj 185 117 inlet;
#X msg 235 450 \; \$1-ping \$1 \$2 \;;
#X connect 0 1 8 0;
#X connect 1 0 3 0;
#X connect 2 0 13 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 2 1;
#X connect 8 0 1 0;
#X connect 8 1 11 0;
#X connect 9 0 6 0;
#X connect 10 0 0 0;
#X connect 10 1 3 1;
#X connect 11 0 9 1;
#X connect 12 0 10 0;
#X restore 962 290 pd multiping;
#N canvas 721 392 452 303 ping-old-disabled 0;
#X obj 153 46 text search clients 1;
#X obj 153 67 sel -1;
#X floatatom 186 109 5 0 0 0 - - - 0 0 1, f 5;
#X obj 186 129 text get clients 0;
#X floatatom 186 150 5 0 0 0 - - - 0 0 1, f 5;
#X obj 186 88 t f f, f 8;
#X obj 186 170 pack 0 0;
#X msg 186 192 \; \$1-ping \$1 \$2 \;;
#X connect 0 0 1 0;
#X connect 1 1 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 2 0;
#X connect 5 1 6 1;
#X connect 6 0 7 0;
#X restore 962 310 pd ping-old-disabled;
#X obj 1279 453 pack 0 0 0;
#X msg 796 889 \$2 \$1 0;
#X msg 232 741 0.87;
#X msg 890 196 \; \$1-client-disconnect bang;
#X connect 0 0 60 0;
#X connect 0 0 98 0;
#X connect 2 0 146 0;
#X connect 3 0 118 2;
#X connect 4 0 5 0;
#X connect 5 0 128 0;
#X connect 6 0 150 0;
#X connect 8 0 10 0;
#X connect 10 0 166 0;
#X connect 10 1 7 1;
#X connect 10 2 11 0;
#X connect 11 0 9 0;
#X connect 12 0 18 0;
#X connect 14 0 15 0;
#X connect 15 0 158 0;
#X connect 16 0 162 0;
#X connect 18 0 21 0;
#X connect 19 0 20 0;
#X connect 20 0 15 1;
#X connect 21 0 22 0;
#X connect 21 1 66 0;
#X connect 22 0 16 0;
#X connect 22 1 15 1;
#X connect 23 0 82 0;
#X connect 23 1 118 0;
#X connect 25 0 28 0;
#X connect 26 0 27 0;
#X connect 27 0 29 0;
#X connect 28 0 26 0;
#X connect 29 0 30 0;
#X connect 30 0 111 0;
#X connect 33 0 36 0;
#X connect 34 0 35 0;
#X connect 35 0 160 0;
#X connect 36 0 39 0;
#X connect 37 0 38 0;
#X connect 38 0 35 1;
#X connect 39 1 37 0;
#X connect 40 0 34 0;
#X connect 40 1 41 0;
#X connect 41 0 33 0;
#X connect 47 0 51 0;
#X connect 48 0 50 0;
#X connect 49 0 48 0;
#X connect 50 0 45 0;
#X connect 51 0 54 0;
#X connect 52 0 142 0;
#X connect 52 1 49 1;
#X connect 54 0 49 0;
#X connect 55 0 165 0;
#X connect 57 0 59 0;
#X connect 58 0 0 0;
#X connect 59 0 58 0;
#X connect 60 0 61 0;
#X connect 63 0 126 0;
#X connect 64 0 10 0;
#X connect 65 0 82 0;
#X connect 66 0 19 0;
#X connect 67 0 80 0;
#X connect 68 0 69 0;
#X connect 70 0 175 0;
#X connect 72 0 71 0;
#X connect 73 0 75 0;
#X connect 74 0 81 0;
#X connect 74 1 73 0;
#X connect 75 0 76 1;
#X connect 76 0 77 0;
#X connect 77 0 78 0;
#X connect 79 0 177 0;
#X connect 80 0 17 1;
#X connect 81 0 76 0;
#X connect 82 0 154 0;
#X connect 82 1 55 0;
#X connect 95 0 14 0;
#X connect 95 1 12 0;
#X connect 95 2 16 0;
#X connect 95 3 96 0;
#X connect 96 0 101 0;
#X connect 97 0 100 0;
#X connect 98 0 99 0;
#X connect 101 0 97 1;
#X connect 102 0 97 0;
#X connect 104 0 110 0;
#X connect 104 1 106 0;
#X connect 105 0 115 0;
#X connect 105 1 113 0;
#X connect 106 0 173 0;
#X connect 107 0 105 0;
#X connect 108 0 107 0;
#X connect 110 0 23 0;
#X connect 110 1 111 1;
#X connect 111 0 112 0;
#X connect 112 0 169 0;
#X connect 113 0 23 0;
#X connect 113 1 111 1;
#X connect 115 0 23 0;
#X connect 115 1 111 1;
#X connect 117 0 104 0;
#X connect 117 1 118 3;
#X connect 118 0 152 0;
#X connect 120 0 14 0;
#X connect 120 1 121 0;
#X connect 120 2 16 0;
#X connect 120 3 96 0;
#X connect 121 0 15 1;
#X connect 122 0 177 1;
#X connect 124 0 116 0;
#X connect 126 0 127 0;
#X connect 126 1 4 0;
#X connect 127 0 4 0;
#X connect 130 1 180 0;
#X connect 131 0 137 0;
#X connect 132 0 179 0;
#X connect 133 0 131 0;
#X connect 134 0 136 0;
#X connect 134 1 131 2;
#X connect 136 0 135 0;
#X connect 137 0 71 0;
#X connect 142 1 47 0;
#X connect 143 0 52 0;
#X connect 143 1 51 1;
#X connect 146 0 118 1;
#X connect 146 1 145 0;
#X connect 147 0 165 0;
#X connect 148 0 14 0;
#X connect 148 1 15 1;
#X connect 148 2 16 0;
#X connect 148 3 124 0;
#X connect 149 0 95 0;
#X connect 150 0 157 0;
#X connect 150 1 0 0;
#X connect 150 2 2 0;
#X connect 150 3 3 0;
#X connect 152 0 153 0;
#X connect 152 1 169 1;
#X connect 152 2 25 0;
#X connect 153 0 159 1;
#X connect 154 0 159 0;
#X connect 157 0 117 0;
#X connect 157 1 175 0;
#X connect 157 2 130 0;
#X connect 157 5 156 0;
#X connect 157 6 63 0;
#X connect 158 0 133 0;
#X connect 158 1 72 0;
#X connect 158 2 160 0;
#X connect 158 3 16 1;
#X connect 158 4 102 0;
#X connect 158 5 103 0;
#X connect 158 6 159 2;
#X connect 160 0 13 0;
#X connect 162 0 161 0;
#X connect 162 1 68 0;
#X connect 162 2 178 0;
#X connect 162 3 67 0;
#X connect 162 4 16 0;
#X connect 165 1 74 0;
#X connect 166 1 79 0;
#X connect 168 0 23 0;
#X connect 168 1 111 1;
#X connect 169 0 40 0;
#X connect 169 1 95 0;
#X connect 169 2 120 0;
#X connect 169 3 148 0;
#X connect 169 4 171 0;
#X connect 171 0 14 0;
#X connect 171 1 15 1;
#X connect 171 2 16 0;
#X connect 171 3 172 0;
#X connect 172 0 116 0;
#X connect 173 0 168 0;
#X connect 173 1 108 0;
#X connect 177 0 7 0;
#X connect 178 0 17 0;
#X connect 179 0 134 0;
